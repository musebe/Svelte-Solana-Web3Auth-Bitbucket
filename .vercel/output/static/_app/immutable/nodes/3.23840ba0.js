import{s as R,n as M,r as te,h as J}from"../chunks/scheduler.e3945ab3.js";import{S as X,i as Z,g as w,m as I,s as A,h as k,j as E,n as L,f as p,c as N,x,k as v,a as D,y as i,z as V,o as O,r as le,u as ne,v as ae,d as se,t as oe,w as re}from"../chunks/index.4e0e09fa.js";import{c as ce,a as ie,b as ue,g as fe}from"../chunks/authFunctions.a8864b2c.js";import{w as S}from"../chunks/singletons.227df374.js";const de=S(!1),ee=S(null);let Y=S(null);const $=S(!1),j=S(!1),P=S(""),F=S(null);async function me(){$.set(!0),P.set("");try{const l=await ce();l&&l.userInfo?(console.log("Wallet connected:",l.solanaWallet),ee.set(l.userInfo),Y.set(l.solanaWallet)):P.set("Wallet connection failed")}catch(l){l instanceof Error?(console.error("Connection failed:",l),P.set(l.message||"An error occurred during connection.")):(console.error("Unknown error during connection"),P.set("An unknown error occurred during connection."))}finally{$.set(!1)}}async function be(){let l;if(Y.subscribe(e=>l=e),!l){P.set("No wallet connected");return}j.set(!0),F.set(null);try{F.set(await ie(l))}catch(e){console.error("Balance fetch failed:",e),P.set(e.message||"An error occurred while fetching balance.")}finally{j.set(!1)}}async function he(){try{await ue(),console.log("Logged out successfully"),de.set(!1),fe("/")}catch(l){console.error("Logout failed:",l)}}function K(l){let e,t;return{c(){e=w("p"),t=I(l[4]),this.h()},l(n){e=k(n,"P",{class:!0});var a=E(e);t=L(a,l[4]),a.forEach(p),this.h()},h(){v(e,"class","text-red-500")},m(n,a){D(n,e,a),i(e,t)},p(n,a){a&16&&O(t,n[4])},d(n){n&&p(e)}}}function _e(l){let e,t="No user data available";return{c(){e=w("p"),e.textContent=t},l(n){e=k(n,"P",{"data-svelte-h":!0}),x(e)!=="svelte-4dxqnb"&&(e.textContent=t)},m(n,a){D(n,e,a)},p:M,d(n){n&&p(e)}}}function ge(l){var T,W;let e,t,n,a,_,s,u=(((T=l[0])==null?void 0:T.name)??"Unknown User")+"",m,f,B,g=(((W=l[0])==null?void 0:W.email)??"No Email")+"",U;return{c(){e=w("div"),t=w("img"),_=A(),s=w("p"),m=I(u),f=A(),B=w("p"),U=I(g),this.h()},l(d){e=k(d,"DIV",{class:!0});var b=E(e);t=k(b,"IMG",{class:!0,src:!0,alt:!0}),_=N(b),s=k(b,"P",{class:!0});var y=E(s);m=L(y,u),y.forEach(p),f=N(b),B=k(b,"P",{class:!0});var r=E(B);U=L(r,g),r.forEach(p),b.forEach(p),this.h()},h(){var d;v(t,"class","w-16 h-16 rounded-full mx-auto"),J(t.src,n=l[0].profileImage)||v(t,"src",n),v(t,"alt",a=((d=l[0])==null?void 0:d.name)??"User"),v(s,"class","text-center text-lg font-semibold mt-2"),v(B,"class","text-center text-sm text-gray-600"),v(e,"class","mt-4 p-4 border rounded shadow-lg")},m(d,b){D(d,e,b),i(e,t),i(e,_),i(e,s),i(s,m),i(e,f),i(e,B),i(B,U)},p(d,b){var y,r,q;b&1&&!J(t.src,n=d[0].profileImage)&&v(t,"src",n),b&1&&a!==(a=((y=d[0])==null?void 0:y.name)??"User")&&v(t,"alt",a),b&1&&u!==(u=(((r=d[0])==null?void 0:r.name)??"Unknown User")+"")&&O(m,u),b&1&&g!==(g=(((q=d[0])==null?void 0:q.email)??"No Email")+"")&&O(U,g)},d(d){d&&p(e)}}}function Q(l){let e,t,n,a,_;return{c(){e=w("div"),t=w("p"),n=I("Your account balance is: "),a=I(l[5]),_=I(" SOL"),this.h()},l(s){e=k(s,"DIV",{class:!0});var u=E(e);t=k(u,"P",{});var m=E(t);n=L(m,"Your account balance is: "),a=L(m,l[5]),_=L(m," SOL"),m.forEach(p),u.forEach(p),this.h()},h(){v(e,"class","mt-4 p-4 border rounded shadow-lg")},m(s,u){D(s,e,u),i(e,t),i(t,n),i(t,a),i(t,_)},p(s,u){u&32&&O(a,s[5])},d(s){s&&p(e)}}}function pe(l){let e,t,n=l[2]?"Connecting...":"Connect Wallet",a,_,s,u=l[3]?"Fetching Balance...":"Get Account Balance",m,f,B,g,U="Logout",T,W,d,b,y,r=l[4]&&K(l);function q(c,o){return c[0]?ge:_e}let G=q(l),C=G(l),h=l[5]!==null&&Q(l);return{c(){e=w("div"),t=w("button"),a=I(n),_=A(),s=w("button"),m=I(u),B=A(),g=w("button"),g.textContent=U,T=A(),r&&r.c(),W=A(),C.c(),d=A(),h&&h.c(),this.h()},l(c){e=k(c,"DIV",{});var o=E(e);t=k(o,"BUTTON",{class:!0});var z=E(t);a=L(z,n),z.forEach(p),_=N(o),s=k(o,"BUTTON",{class:!0});var H=E(s);m=L(H,u),H.forEach(p),B=N(o),g=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),x(g)!=="svelte-jmsqlr"&&(g.textContent=U),T=N(o),r&&r.l(o),W=N(o),C.l(o),d=N(o),h&&h.l(o),o.forEach(p),this.h()},h(){v(t,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded md:w-auto w-full mb-2"),t.disabled=l[2],v(s,"class","bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded md:ml-2 ml-0 md:w-auto w-full mb-2"),s.disabled=f=l[3]||!l[1],v(g,"class","bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded md:ml-2 ml-0 md:w-auto w-full")},m(c,o){D(c,e,o),i(e,t),i(t,a),i(e,_),i(e,s),i(s,m),i(e,B),i(e,g),i(e,T),r&&r.m(e,null),i(e,W),C.m(e,null),i(e,d),h&&h.m(e,null),b||(y=[V(t,"click",me),V(s,"click",be),V(g,"click",he)],b=!0)},p(c,[o]){o&4&&n!==(n=c[2]?"Connecting...":"Connect Wallet")&&O(a,n),o&4&&(t.disabled=c[2]),o&8&&u!==(u=c[3]?"Fetching Balance...":"Get Account Balance")&&O(m,u),o&10&&f!==(f=c[3]||!c[1])&&(s.disabled=f),c[4]?r?r.p(c,o):(r=K(c),r.c(),r.m(e,W)):r&&(r.d(1),r=null),G===(G=q(c))&&C?C.p(c,o):(C.d(1),C=G(c),C&&(C.c(),C.m(e,d))),c[5]!==null?h?h.p(c,o):(h=Q(c),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:M,o:M,d(c){c&&p(e),r&&r.d(),C.d(),h&&h.d(),b=!1,te(y)}}}function ve(l,e,t){let n=null;ee.subscribe(f=>t(0,n=f));let a=null;Y.subscribe(f=>t(1,a=f));let _=!1;$.subscribe(f=>t(2,_=f));let s=!1;j.subscribe(f=>t(3,s=f));let u="";P.subscribe(f=>t(4,u=f));let m=null;return F.subscribe(f=>t(5,m=f)),[n,a,_,s,u,m]}class we extends X{constructor(e){super(),Z(this,e,ve,pe,R,{})}}function ke(l){let e,t;return e=new we({}),{c(){le(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,a){ae(e,n,a),t=!0},p:M,i(n){t||(se(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}class Ie extends X{constructor(e){super(),Z(this,e,null,ke,R,{})}}export{Ie as component};
